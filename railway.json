{
    "nixpacks": {
        "phases": {
            "setup": {
                "nixPkgs": [
                    "nodejs_18"
                ]
            },
            "install": {
                "cmds": [
                    "npm install",
                    "cd server && npm install",
                    "cd client && npm install"
                ]
            },
            "build": {
                "cmds": [
                    "cd client && npm run build"
                ]
            },
            "start": {
                "cmd": "cd server && npm start"
            }
        }
    },
    "deploy": {
        "healthcheckPath": "/",
        "restartPolicyType": "ON_FAILURE",
        "sleep": false
    },
    "env": {
        "NODE_ENV": "production"
    }
}